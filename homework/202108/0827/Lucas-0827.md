# Raft- 寻找一种易于理解的一致性算法（扩展版）

## 1 介绍
- Raft算法分解成：选举领导，日志复制，安全
- 其他特性：强领导者，领导选举，成员状态调整

## 2 复制状态机
- 所有节点上的状态机产生相同的副本
- 强领导者：GFS，HDFS，Chubby，ZooKeeper
- 状态机以相同的顺序处理日志，会生成相同的结果
- 一致性算法特性：保证安全，可用性，不依赖时序，快速反应

## 3 Poxos的问题

## 4 可理解性设计

## 5 Raft 一致性算法
- 三个子问题，领导选举，日志复制，数据完整

### 5.1 Raft 基础
- 所有节点都可能有三种状态，任何时候只有一个领导
- 跟随者，接受不到心跳，就变成候选者，并发起选举
- 候选人，选举成功就成为领导者，收到更新的任期，则降为跟随者
- 领导者，给其他节点发送日志和心跳

### 5.2 领导选举

### 5.3 日志复制
- 领导者给其他节点发送指令
- 其他节点的复制状态机执行指令
- 指令可以包括多条日志，追加刀现有日志文件
- 指令还包括心跳

### 5.4 完整性

#### 5.4.1 选举限制
- 之前任期出现的日志都会出现在新的领导上
- 候选者如果没有最新的日志，则会降级成跟随者

#### 5.4.2 提交前任期的日志
- 日志尽量保持同一个任期 ？

#### 5.4.3 安全性论证
- 领导者的任期更高，保证了日志不会丢失？
