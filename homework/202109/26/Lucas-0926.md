## 0926

## 6.824 2021 Lecture 14 - Spanner

## 需求
- 广域网分布式事务的罕见用例
- 两阶段提交看起来慢，容易阻塞
- 解决办法，基于Paxos两阶段提交
- 异步时间来解决快速的只读事务
- 最新数据应该比本地副本的权限更高

## 用例
- F1 广告系统，替代 BigTable
- 更快的异步复制，灵活的分区，跨分区事务
- TODO-Table-6: 负载以只读事务为主
- 要求强一致性，外部一致性，可线性化，可序列化

## 分区
- 每个分区对应Paxos组，副本都在不同的数据中心
- 分区可以通过并行实现搞吞吐
- 客户端可以很快的读取本地副本
- 可以在客户附近部署副本

## 读写事务
- 基于Paxos 副本的两阶段提交
- 客户端获取全局唯一的事务ID，然后把请求发送给相关分区的 Paxos 主节点

## 只读事务
- TODO

## 术语
- prone，易于
- neat，巧妙
