## 0924

### 4.2.1 读写事务
- 和Bigtable一样，事务的写入操作在提交之前会在客户端缓存
- 读取操作可以从客户端直接读取？从而不知道事务有没有写入？
- 读操作会获取数据的时间戳，但是未提交的写操作没有被分配时间戳
- 该事务的读操作使用伤停等待避免死锁
- 客户端将赌球请求发给副本，并获取读取锁，从而拿到最新数据
- 客户端完成读取，然后缓冲写入？开始两阶段提交

## TODO 两阶段提交
- https://en.wikipedia.org/wiki/Two-phase_commit_protocol
- 为了事务提交的一致性
- 每个节点只能知道自己的操作是否成功，无法知道其他节点的状态
- 如果一个事务跨越多个节点，为了保证事务的ACID，需要引入一个协调者
- 让参与者将WAL结果通知协调者，然后协调者根据结果，觉得参与者是提交还是终止
- 区别于用来并发控制的两阶段锁

